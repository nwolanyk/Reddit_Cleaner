#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
Created on Thu Jul 27 10:30:55 2017

@author: nwolanyk
"""

from flask import *
from json import *
from flask_cors import CORS, cross_origin
from functools import wraps
from collections import namedtuple
import json

#app = Flask(__name__)
#CORS(app)




app = Flask(__name__)
app.config.from_object(__name__)
#CORS(app)
#cors = CORS(app, resources={r'/*': {"origins": 'chrome-extension://gpjdkbiabpbalamhjpaofdkapijdmlgh'}})

@app.route('/')
@cross_origin()
def hello():
    jsonResp = {'jack': 4098, 'sape': 4139}
    print(request.args.getlist('subid')[0])
    return(jsonify(jsonResp))
    #return('hello')
    #test = request.query_string
    #test = request.get_json(force=True)
    #test = request.json
    #test = request.args.get('a', 'False')
    #test = request.args.get('callback', False)
    #print(test)
    #test2 = request.json
    #print(type(test2))
    #test = json.loads(test2, object_hook=lambda d: namedtuple('X', d.keys())(*d.values()))
    #x = json.loads(test2, object_hook=lambda d: namedtuple('X', d.keys())(*d.values()))
    #print([ x.email, x.response.name])
    #test = request.form
    #test = request.args
    #callback = request.args.get('callback')
    #callback2 = request.args.get('_')
    #callback = callback+'='
    #print(test)
    #return 'callback(' + d + ');'
    #test2 = '{0}({1})'.format(callback, dict(a="foo"))
    #test2 = "%s({'a':1, 'b':2})" % callback
    #test2 = jsonpify({'a':1, 'b':2})
    #print(test2)
    #return(test2)
    #if test:
    #return "\'ditto\'";
    #return "nooo"
    #return jsonify(request.json)
